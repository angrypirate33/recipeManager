<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.VBox?>
<?import javafx.scene.control.*?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.HBox?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.layout.Priority?>
<?import com.angrypirate.viewmodels.IngredientViewModel?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.angrypirate.controllers.MainController" spacing="10">
    <padding>
        <Insets top="10" right="10" bottom="10" left="10"/>
    </padding>

    <!-- Search Bar -->
    <HBox spacing="5">
        <TextField fx:id="searchField" HBox.hgrow="ALWAYS" promptText="Search for ingredients..."/>
        <Button text="Search" onAction="#handleSearch"/>
    </HBox>

    <!-- Search Results -->
    <TableView fx:id="searchResultsTable" VBox.vgrow="ALWAYS">
        <columns>
            <TableColumn fx:id="nameColumn" text="Name" prefWidth="150">
                <cellValueFactory>
                    <PropertyValueFactory property="name"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="caloriesColumn" text="Calories" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="calories"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="fatColumn" text="Fat (g)" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="fat"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="proteinColumn" text="Protein (g)" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="protein"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="carbsColumn" text="Carbs (g)" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="carbohydrates"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="fiberColumn" text="Fiber (g)" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="fiber"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="sugarColumn" text="Sugar (g)" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="sugar"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="sodiumColumn" text="Sodium (mg)" prefWidth="80">
                <cellValueFactory>
                    <PropertyValueFactory property="sodium"/>
                </cellValueFactory>
            </TableColumn>
        </columns>
    </TableView>


    <!-- Add Ingredient to Recipe -->
    <HBox spacing="5">
        <Label text="Quantity:"/>
        <TextField fx:id="quantityField" prefWidth="70"/>
        <Label text="Unit:"/>
        <TextField fx:id="unitField" prefWidth="70"/>
        <Button text="Add to Recipe" onAction="#handleAddIngredient"/>
    </HBox>

    <!-- Recipe Ingredients -->
    <Label text="Recipe Ingredients:"/>
    <TableView fx:id="recipeIngredientsTable">
        <columns>
            <TableColumn fx:id="recipeNameColumn" text="Name" prefWidth="200">
                <cellValueFactory>
                    <PropertyValueFactory property="name"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="quantityColumn" text="Quantity" prefWidth="100">
                <cellValueFactory>
                    <PropertyValueFactory property="quantity"/>
                </cellValueFactory>
            </TableColumn>
            <TableColumn fx:id="unitColumn" text="Unit" prefWidth="100">
                <cellValueFactory>
                    <PropertyValueFactory property="unit"/>
                </cellValueFactory>
            </TableColumn>
        </columns>
    </TableView>

    <!-- Instructions Section -->
    <Label text="Instructions:"/>
    <ListView fx:id="instructionsListView" VBox.vgrow="ALWAYS"/>

    <HBox spacing="5">
        <TextField fx:id="instructionField" HBox.hgrow="ALWAYS" prefHeight="150" promptText="Enter instruction..."/>
        <Button text="Add Instruction" onAction="#handleAddInstruction"/>
    </HBox>

    <!-- Save Recipe -->
    <HBox spacing="5">
        <Label text="Recipe Title:"/>
        <TextField fx:id="recipeTitleField" HBox.hgrow="ALWAYS"/>
        <Button text="Save Recipe" onAction="#handleSaveRecipe"/>
    </HBox>
</VBox>
